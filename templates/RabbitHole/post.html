{% extends 'RabbitHole/base.html' %} 
{% load static %}
{% block title %}Post{% endblock title %}
{% block content %}
<div class="d-flex justify-content-center m-1 mt-5 w-100">
    <div class="col-md-6">
      <!-- Post -->
      <div class="card mb-4">
        <div class="card-body">
          <div class="row align-items-center">
            <div class="col-1 mr-3">
              <img
                src="{{post.user.avatar.url}}"
                class="rounded-circle"
                alt="User Avatar"
                width="60"
                height="60"
              />
            </div>
            <div class="col-10 ml-2">
              <h5 class="card-title mb-0">
                <a href="{% url 'user_page' post.user.username%}" class="text-muted">u/{{post.user.username}}</a>
                <small class="text-muted"> - </small>
                <small class="text-muted"> {{post.created_at|timesince}}</small>
              </h5>
            </div>  
          </div>
        </div>
        <div class="card-body">
          <h5 class="card-title">{{post.title}}</h5>
            <p class="card-text">
              {% if post.content%}
                  {{post.content}}
              {% elif post.image%}
                  <img src="{{post.image.url}}"  class="img-fluid" alt="{{post.user.username}}">
              {% endif %}
            </p>
        </div>
        <div class="card-footer text-muted">
          {% if request.user.is_authenticated %}
          <a class="btn btn-primary"
            href="{% url 'create_reply' room_name=post.room.name post_id=post.id post_slug=post.slug %}"
          >reply</a>
          {% endif %}
          <p class="my-2">Replies:</p>
          <!-- Replies -->
          {% if replies %} {% for reply in replies %}
          <div class="media mt-4">
            <img
              src="{{reply.user.avatar.url}}"
              class="mr-3 rounded-circle"
              alt="{{reply.user.username}}"
              width="40"
              height="40"
            />
            <div class="media-body">
              <h5 class="mt-0">u/{{reply.user.username}}</h5>
              <p>{{reply.title}}</p>
              <p>
                {% if reply.content %}
                  {{reply.content}}
                {% elif reply.image%}
                  <img src="{{reply.image.url}}" class="img-fluid" alt="{{reply.user.username}}">
                {% endif %}
            </p>
            </div>
          </div>
          {% endfor %} {% endif %}
        </div>
      </div>
    </div>
</div>
{% endblock content %}